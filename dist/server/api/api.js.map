{"version":3,"sources":["../../../src/server/api/api.js"],"names":[],"mappings":";;;;;AAAA,IAAM,OAAO,QAAQ,wBAAR,CAAb;;AAEA,IAAM,MAAM;AACV,gBAAc;AAAA,WAAM,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAa;AAC3C,cAAQ,OAAO,IAAP,CAAY,IAAZ,EACL,GADK,CACD;AAAA,eAAQ;AACX,cAAI,GADO;AAEX,gBAAM,KAAK,GAAL,EAAU,IAAV,CAAe;AAFV,SAAR;AAAA,OADC,CAAR;AAKD,KANmB,CAAN;AAAA,GADJ;AAQV,YAAU,kBAAC,EAAD;AAAA,WAAQ,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACjD,UAAM,QAAQ,KAAK,EAAL,CAAd;AACA,UAAI,KAAJ,EAAW;AAAA;;;AAGT,cAAM,gBAAgB,MAAM,IAAN,CAAW,cAAjC;AACA,gBAAM,IAAN,GAAa,MAAM,IAAN,CAAW,GAAX,CAAe,aAAK;AAC/B,gBAAM,MAAM,EAAZ;AACA,gBAAI,aAAJ,IAAqB,EAAE,aAAF,CAArB;AACA,gBAAI,IAAJ,GAAW,EAAE,IAAb;AACA,mBAAO,GAAP;AACD,WALY,CAAb;AAMA,kBAAQ,KAAR;AAVS;AAWV,OAXD,MAWO;AACL,6CAAkC,EAAlC;AACD;AACF,KAhBiB,CAAR;AAAA;AARA,CAAZ;;kBA2Be,G","file":"api.js","sourcesContent":["const data = require('../../../database.json');\r\n\r\nconst api = {\r\n  getStockList: () => new Promise((resolve) => {\r\n    resolve(Object.keys(data)\r\n      .map(key => ({\r\n        id: key,\r\n        name: data[key].meta.name\r\n      })));\r\n  }),\r\n  getStock: (id) => new Promise((resolve, reject) => {\r\n    const stock = data[id];\r\n    if (stock) {\r\n      // extract default column\r\n      // TODO: extend to allow required column(s) to be passed in\r\n      const defaultColumn = stock.meta.default_column;\r\n      stock.data = stock.data.map(d => {\r\n        const out = {};\r\n        out[defaultColumn] = d[defaultColumn];\r\n        out.date = d.date;\r\n        return out;\r\n      });\r\n      resolve(stock);\r\n    } else {\r\n      reject(`No stock found with id '${id}'`);\r\n    }\r\n  })\r\n};\r\n\r\nexport default api;\r\n"]}